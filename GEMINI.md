# Gemini Context File (GEMINI.md)

## Project Overview

**Project Name:** Pipelines (Tugboat Captain's Playground)
**Type:** .NET 9.0 Desktop Application (Photino + Blazor Hybrid)

This project is a comprehensive developer utility dashboard designed to streamline various DevOps and engineering tasks. It acts as a central hub for managing CI/CD pipelines, database schemas (Oracle, Mongo), configuration management (Consul), and git repositories.

The application is built using **Photino.NET**, allowing it to run as a lightweight, cross-platform desktop application using Blazor for the UI. It bundles into a single executable for easy distribution.

## Architecture

*   **`TugboatCaptainsPlayground/`**: The main entry point and UI layer. It hosts the Blazor components and handles the desktop windowing via Photino.
*   **`Common/`**: The core library containing business logic, data models, database contexts (EF Core), and service integrations (Azure DevOps, GitHub, Oracle, Consul, Mongo, Quartz).
*   **`Generation/`**: A C# Source Generator project used to automate code generation tasks (likely for state management or boilerplate reduction).
*   **`Tests/`**: Unit and integration tests.

## Key Technologies

*   **Framework:** .NET 9.0
*   **UI:** Blazor Hybrid (via Photino.NET), Blazor Bootstrap
*   **Data Access:** Entity Framework Core 9 (SQLite, Oracle), MongoDB.Driver
*   **Scheduling:** Quartz.NET
*   **Integrations:**
    *   **Git:** LibGit2Sharp
    *   **DevOps:** Microsoft.TeamFoundationServer.Client
    *   **AI/LLM:** ModelContextProtocol, SmartComponents.LocalEmbeddings
*   **Tools:** AspectInjector (AOP), H.NotifyIcon (System Tray)

## Building and Running

### Prerequisites
*   .NET 9.0 SDK (`global.json` specifies version `9.0.205` or higher)

### Commands

**1. Run the Application:**
```powershell
dotnet run --project TugboatCaptainsPlayground
```

**2. Build the Solution:**
```powershell
dotnet build
```

**3. Run Tests:**
```powershell
dotnet test
```

**4. Publish (Single File Executable):**
The project is configured to publish as a single file executable.
```powershell
dotnet publish TugboatCaptainsPlayground -c Release
```
*   Output will be a standalone `.exe` (e.g., `TugboatCaptainsPlayground.exe`).

**5. Database Migrations (Common):**
Since the `DbContext` is in `Common`, you may need to specify the startup project when running EF commands.
```powershell
dotnet ef migrations add <MigrationName> --project Common --startup-project TugboatCaptainsPlayground
dotnet ef database update --project Common --startup-project TugboatCaptainsPlayground
```

**6. Versioning:**
To increment the patch version and push a new git tag:
```powershell
./bump_version.ps1
```

## Development Conventions

*   **Code Style:** Follow standard C# .NET conventions.
*   **Dependencies:** Managed via NuGet. `packages.lock.json` files are present, indicating locked dependencies (`RestorePackagesWithLockFile` is enabled).
*   **Source Generation:** Be aware that some code might be auto-generated by the `Generation` project.
*   **Localization:** The project uses `InvariantGlobalization` set to `true`, implying it targets a specific locale or English-only usage for system consistency.
*   **System Tray:** The app is designed to minimize to the system tray (`H.NotifyIcon`).

## Key Files & Directories

*   `Pipelines.sln`: Main solution file.
*   `TugboatCaptainsPlayground/Program.cs`: App entry point and service configuration.
*   `TugboatCaptainsPlayground/wwwroot/`: Static assets (embedded in the binary).
*   `Common/Jobs/`: Quartz.NET job definitions for background tasks (backups, updates).
*   `Common/ExternalApis/`: Facades for external services (Git, Build servers).
