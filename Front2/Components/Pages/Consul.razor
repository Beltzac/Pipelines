@page "/consul"
@inject ISignalRClientService SignalRClientService
@using Common
@using Common.Services
@using Markdig
@using Microsoft.AspNetCore.Components.Forms
@using System.Text.RegularExpressions
@using System.Reactive.Subjects
@using System.Reactive.Linq
@inject IToastService toastService
@rendermode InteractiveServer
@inject IJSRuntime JS
@inject IConsulService ConsulService
@inject ICommitDataExportService CommitDataExportService





<h3>Consul</h3>

<div id="myDiffElement"></div>

<div class="mb-3">
    <label for="consulEditor" class="form-label">Consul Editor</label>
    <ul>
        @foreach (var key in consulKeys)
        {
            <li>@key</li>
        }
    </ul>
</div>

<button class="btn btn-primary text-nowrap" @onclick="async () => await DownloadConsul()">Download Consul</button>
<button class="btn btn-success text-nowrap" @onclick="async () => await SaveConsul()">Save Consul</button>



@code {

    private async ValueTask DownloadConsul()
    {
        consulKeys = await ConsulService.GetConsulKeys();
        toastService.ShowSuccess("Consul keys downloaded successfully!");
    }
    private List<string> consulKeys = new List<string>();
    private string consulContent = string.Empty;

    private async Task SaveConsul()
    {
        // Logic to save the edited Consul content
        // This is a placeholder for the actual implementation
        toastService.ShowSuccess("Consul content saved successfully!");
    }
}
